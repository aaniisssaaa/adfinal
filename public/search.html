<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü–æ–∏—Å–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <style>
        /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∑–Ω–∞—á–æ–∫ $ */
        .price-symbol {
            font-size: 1.8rem;
            font-weight: 800;
            color: #00761c; /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –¥–µ–Ω–µ–≥ */
            vertical-align: middle;
        }

        /* –¶–≤–µ—Ç –ø–æ–ª–∑—É–Ω–∫–∞ –∏ –∫—Ä—É–∂–∫–∞ */
        input[type="range"] {
            accent-color: #de08db; /* –¢–≤–æ–π —Ä–æ–∑–æ–≤—ã–π/—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ü–≤–µ—Ç */
            cursor: pointer;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ü–µ–Ω—ã */
        #priceDisplay { 
            font-size: 1.5rem;
            color: #0e1da3; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç */
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
        <div class="container">
            <a class="navbar-brand" href="index.html">üöó RentalCars Admin</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a class="nav-link active" href="search.html">–ü–æ–∏—Å–∫</a>
                <a class="nav-link" href="dashboard.html">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            </div>
        </div>
    </nav>

    <!-- –ë–ª–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–∏—Å–∫–∞ -->

    <div class="container">
        <div class="row shadow-sm bg-white p-4 rounded-4 mb-4 align-items-end">
            <div class="col-md-5">
                <label class="form-label fw-bold">–ú–∞—Ä–∫–∞</label>
                <div class="input-group">
                    <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
                    <input type="text" id="searchBrand" class="form-control border-start-0" placeholder="–ù–∞–ø—Ä: Toyota">
                </div>
            </div>
            
            <div class="col-md-4">
                <label class="form-label fw-bold">–ú–∞–∫—Å. —Ü–µ–Ω–∞ <span class="price-symbol">$</span></label>
                <input type="range" id="priceRange" class="form-range" 
                       min="0" max="200000" step="200000" value="1000" 
                       oninput="updatePrice(this.value)">
                <div id="priceDisplay">1000</div>
            </div>

            <div class="col-md-3">
                <button onclick="runSearch()" class="btn btn-dark w-100 fw-bold py-2">–ù–∞–π—Ç–∏ –º–∞—à–∏–Ω—ã</button>
            </div>
        </div>

        <div id="results" class="row row-cols-1 row-cols-md-2 g-4"></div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ü–µ–Ω—ã —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
        function updatePrice(val) {
            const formatted = Number(val).toLocaleString('ru-RU');
            document.getElementById('priceDisplay').innerText = formatted;
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞
        async function runSearch() {
            const brand = document.getElementById('searchBrand').value;
            const price = document.getElementById('priceRange').value;
            
            try {
                const res = await fetch(`http://localhost:3000/api/search?brand=${brand}&maxPrice=${price}`);
                const data = await res.json();
                
                const container = document.getElementById('results');
                container.innerHTML = '';
                
                if(data.length === 0) {
                    container.innerHTML = '<div class="col-12 text-center py-5"><h4 class="text-muted">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ üöóüí®</h4></div>';
                    return;
                }

                data.forEach(car => {
                    container.innerHTML += `
                        <div class="col">
                            <div class="card border-0 shadow-sm p-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="mb-0 fw-bold">${car.brand}</h5>
                                        <span class="text-muted">${car.model}</span>
                                    </div>
                                    <div class="text-end">
                                        <span class="badge bg-dark">$${Number(car.pricePerDay).toLocaleString('ru-RU')}/–¥–µ–Ω—å</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            } catch (err) {
                console.error("–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞:", err);
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º!");
            }
        }
       
        // Review feature removed ‚Äî no-op placeholder kept for compatibility
        async function addReview() { return; }
    </script>
</body>
</html>